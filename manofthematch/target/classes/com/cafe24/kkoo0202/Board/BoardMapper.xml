<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="com.cafe24.kkoo0202.Board.BoardMapper">
	<resultMap type="com.cafe24.kkoo0202.Board.Board" id="resultBoard">
		<result column="board_no" property="boardNo"></result>
		<result column="member_no" property="memberNo"></result>
		<result column="board_no2" property="boardNo2"></result>
		<result column="board_category_no" property="boardCategoryNo"></result>
		<result column="board_name" property="boardName"></result>
		<result column="board_content" property="boardContent"></result>
		<result column="board_date" property="boardDate"></result>
		<result column="board_file" property="boardFile"></result>
	</resultMap>
	
	<!-- 게시글 추가 -->
	<insert id="boardAdd" parameterType="com.cafe24.kkoo0202.Board.Board">
		INSERT INTO mom_board(
			board_pw
			, board_category_no
			, board_name
			, board_content
			, board_date
			, board_file)
		VALUES (
			#{boardPw}
			, #{boardCategoryNo}
			, #{boardName}
			, #{boardContent}
			, NOW()
		 	, #{boardFile}
		 )
	</insert>
	
	<!-- 게시글 수정 -->
	<update id="boardModify" parameterType="com.cafe24.kkoo0202.Board.Board">
		UPDATE mom_board 
			SET board_name = #{boardName}
			, board_content = #{boardContent}
		WHERE board_no = #{boardNo}
		AND board_pw = #{boardPw}
	</update>
	
	<!-- 게시글 삭제 -->
	<delete id="boardRemove" parameterType="com.cafe24.kkoo0202.Board.Board">
		DELETE FROM mom_board 
		WHERE board_no = #{boardNo} 
		AND board_pw = #{boardPw}
	</delete>
	
	<!-- 전체리스트보기 -->
	<select id="boardAllList" parameterType="java.util.Map" resultType="com.cafe24.kkoo0202.Board.Board">
		SELECT 
			board_no AS boardNo
			, member_no AS memberNo
			, board_no2 AS boardNo2
			, board_category_no AS boardCategoryNo
			, board_name AS boardName
			, board_content AS boardContent
			, board_date AS boardDate
			, board_file AS boardFile
			, board_pw AS boardPw
		FROM mom_board
		ORDER BY board_date DESC 
		LIMIT #{beginRow}, #{pagePerRow}
	</select>
	
	
	<!-- 전체리스트 수 보기 -->
	<select id="boardAllListCount" resultType="int">
		select count(*) from mom_board
	</select>
	
	<!-- 글 상세 내역 보기(글수정 전 작업)  -->
	<select id="boardView" parameterType="int" resultType="com.cafe24.kkoo0202.Board.Board">
		SELECT
			board_no AS boardNo
			, member_no AS memberNo
			, board_category_no AS boardCategoryNo
			, board_name AS boardName
			, board_content AS boardContent
		  	, board_date AS boardDate
			, board_file AS boardFile
		FROM mom_board 
		WHERE board_no = #{boardNo}
	</select>

</mapper>